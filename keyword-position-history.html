<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Org. Keyword Position History</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: #1a1a2e;
    font-family: system-ui, -apple-system, sans-serif;
    color: #fff;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }
  .card {
    background: #16162a;
    border-radius: 16px;
    padding: 24px 28px;
    width: 100%;
    max-width: 1000px;
  }
  .title {
    font-size: 15px;
    font-weight: 600;
    margin-bottom: 12px;
    color: #ccc;
  }
  .legend {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    margin-bottom: 16px;
  }
  .legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    color: #aaa;
  }
  .legend-box {
    width: 16px; height: 16px;
    border-radius: 3px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .legend-box .check {
    color: #fff;
    font-size: 10px;
    font-weight: 700;
  }
  canvas { display: block; width: 100%; }
</style>
</head>
<body>
<div class="card">
  <div class="title">Org. Keyword Position History</div>
  <div class="legend">
    <div class="legend-item"><div class="legend-box" style="background:#2ECC71"><span class="check">&check;</span></div>Top 3</div>
    <div class="legend-item"><div class="legend-box" style="background:#E74C3C"><span class="check">&check;</span></div>Position 4 - 10</div>
    <div class="legend-item"><div class="legend-box" style="background:#FF6B9D"><span class="check">&check;</span></div>Position 11 - 20</div>
    <div class="legend-item"><div class="legend-box" style="background:#5DADE2"><span class="check">&check;</span></div>Position 21 - 50</div>
    <div class="legend-item"><div class="legend-box" style="background:#3478C6"><span class="check">&check;</span></div>Position 51 - 100</div>
    <div class="legend-item"><div class="legend-box" style="background:#F5D76E"><span class="check">&check;</span></div>SERP Features</div>
  </div>
  <canvas id="chart"></canvas>
</div>
<script>
const canvas = document.getElementById('chart');
const ctx = canvas.getContext('2d');
const dpr = window.devicePixelRatio || 1;

function resize() {
  const rect = canvas.parentElement.getBoundingClientRect();
  const w = rect.width - 56;
  const h = Math.min(w * 0.4, 320);
  canvas.style.width = w + 'px';
  canvas.style.height = h + 'px';
  canvas.width = w * dpr;
  canvas.height = h * dpr;
  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  return { w, h };
}

const labels = ['Jan 12','Sep 12','May 13','Jan 14','Sep 14','May 15','Jan 16','Sep 16','May 17','Jan 18','Sep 18','May 19','Jan 20','Sep 20','May 21','Jan 22','Sep 22','May 23','Jan 24','Sep 24','May 25','Feb 26'];

const categories = [
  { name: 'SERP Features', color: '#F5D76E' },
  { name: 'Position 51-100', color: '#3478C6' },
  { name: 'Position 21-50', color: '#5DADE2' },
  { name: 'Position 11-20', color: '#FF6B9D' },
  { name: 'Position 4-10', color: '#E74C3C' },
  { name: 'Top 3', color: '#2ECC71' },
];

// Generate realistic growth data
function generateData() {
  const data = [];
  for (let i = 0; i < labels.length; i++) {
    let total;
    if (i < 8) total = Math.random() * 10 + 2;          // Jan 12 - Sep 16: near zero
    else if (i < 10) total = Math.random() * 30 + 10;    // May 17 - Jan 18: tiny
    else if (i < 12) total = Math.random() * 200 + 100;  // Sep 18 - May 19: small growth
    else if (i < 14) total = Math.random() * 400 + 400;  // Jan 20 - Sep 20: moderate
    else if (i < 16) total = Math.random() * 500 + 700;  // May 21 - Jan 22: steady
    else if (i < 18) total = Math.random() * 600 + 1200;  // Sep 22 - May 23: bigger
    else if (i < 20) total = Math.random() * 800 + 2400;  // Jan 24 - Sep 24: rapid
    else if (i === 20) total = 3800 + Math.random() * 400; // May 25
    else total = 4800 + Math.random() * 400;               // Feb 26

    const top3 = total * (0.18 + Math.random() * 0.08);
    const p410 = total * (0.15 + Math.random() * 0.06);
    const p1120 = total * (0.12 + Math.random() * 0.05);
    const p2150 = total * (0.2 + Math.random() * 0.06);
    const p51100 = total * (0.18 + Math.random() * 0.06);
    const serp = total * (0.05 + Math.random() * 0.04);
    data.push([serp, p51100, p2150, p1120, p410, top3]);
  }
  return data;
}

const data = generateData();
const maxVal = 6000;
const yTicks = [0, 2000, 4000, 6000];
const yLabels = ['0', '2K', '4K', '6K'];

function easeOutCubic(t) { return 1 - Math.pow(1 - t, 3); }

let dims = resize();
const padding = { left: 36, right: 16, top: 8, bottom: 40 };
const duration = 2000;
let startTime = null;

function draw(timestamp) {
  if (!startTime) startTime = timestamp;
  const elapsed = timestamp - startTime;
  const progress = Math.min(elapsed / duration, 1);
  const easedProgress = easeOutCubic(progress);

  dims = resize();
  const { w, h } = dims;
  const chartW = w - padding.left - padding.right;
  const chartH = h - padding.top - padding.bottom;

  ctx.clearRect(0, 0, w, h);

  // Grid lines
  ctx.strokeStyle = '#2a2a44';
  ctx.lineWidth = 0.5;
  yTicks.forEach((val, i) => {
    const y = padding.top + chartH - (val / maxVal) * chartH;
    ctx.beginPath();
    ctx.moveTo(padding.left, y);
    ctx.lineTo(w - padding.right, y);
    ctx.stroke();
    ctx.fillStyle = '#666';
    ctx.font = '11px system-ui';
    ctx.textAlign = 'right';
    ctx.fillText(yLabels[i], padding.left - 8, y + 4);
  });

  // Bars
  const barW = Math.max(2, (chartW / data.length) * 0.7);
  const gap = chartW / data.length;

  const barsToShow = Math.ceil(easedProgress * data.length);

  for (let i = 0; i < barsToShow; i++) {
    const barProgress = i < barsToShow - 1 ? 1 : (easedProgress * data.length - i);
    const x = padding.left + i * gap + (gap - barW) / 2;
    let yOffset = 0;

    for (let c = 0; c < categories.length; c++) {
      const val = data[i][c] * barProgress;
      const barH = (val / maxVal) * chartH;
      const y = padding.top + chartH - yOffset - barH;
      ctx.fillStyle = categories[c].color;
      ctx.fillRect(x, y, barW, barH);
      yOffset += barH;
    }
  }

  // X-axis labels (show every 3rd)
  ctx.fillStyle = '#666';
  ctx.font = '10px system-ui';
  ctx.textAlign = 'center';
  for (let i = 0; i < labels.length; i += 2) {
    const x = padding.left + i * gap + gap / 2;
    ctx.fillText(labels[i], x, h - 8);
  }

  if (progress < 1) requestAnimationFrame(draw);
}

requestAnimationFrame(draw);
window.addEventListener('resize', () => { startTime = null; requestAnimationFrame(draw); });
</script>
</body>
</html>
