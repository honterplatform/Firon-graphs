<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Historical Metrics</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: #1a1a2e;
    font-family: system-ui, -apple-system, sans-serif;
    color: #fff;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }
  .card {
    background: #16162a;
    border-radius: 16px;
    padding: 24px 28px;
    width: 100%;
    max-width: 1000px;
  }
  .top-bar {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 8px;
  }
  .title {
    font-size: 15px;
    font-weight: 600;
    color: #ccc;
  }
  .time-range {
    display: flex;
    gap: 12px;
    font-size: 12px;
  }
  .time-range span {
    color: #666;
    cursor: pointer;
    padding: 2px 4px;
  }
  .time-range span.active {
    color: #BB8FCE;
    border-bottom: 2px solid #BB8FCE;
  }
  .legend {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    margin-bottom: 16px;
  }
  .legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    color: #666;
  }
  .legend-item.active { color: #aaa; }
  .legend-box {
    width: 14px; height: 14px;
    border-radius: 3px;
  }
  canvas { display: block; width: 100%; }
</style>
</head>
<body>
<div class="card">
  <div class="top-bar">
    <div class="title">Historical Metrics</div>
    <div class="time-range">
      <span>1M</span><span>3M</span><span>6M</span><span>1Y</span><span>2Y</span><span>5Y</span><span class="active">All time</span>
    </div>
  </div>
  <div class="legend">
    <div class="legend-item"><div class="legend-box" style="background:#5DADE2"></div>Organic keywords</div>
    <div class="legend-item active"><div class="legend-box" style="background:#BB8FCE"></div>Organic Traffic</div>
    <div class="legend-item"><div class="legend-box" style="background:#E8845A"></div>Paid Keywords</div>
    <div class="legend-item"><div class="legend-box" style="background:#F5D76E"></div>Paid Traffic</div>
  </div>
  <canvas id="chart"></canvas>
</div>
<script>
const canvas = document.getElementById('chart');
const ctx = canvas.getContext('2d');
const dpr = window.devicePixelRatio || 1;

function resize() {
  const rect = canvas.parentElement.getBoundingClientRect();
  const w = rect.width - 56;
  const h = Math.min(w * 0.35, 300);
  canvas.style.width = w + 'px';
  canvas.style.height = h + 'px';
  canvas.width = w * dpr;
  canvas.height = h * dpr;
  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  return { w, h };
}

const labels = ['Jan 12','Oct 12','Jul 13','Apr 14','Jan 15','Oct 15','Jul 16','Apr 17','Jan 18','Oct 18','Jul 19','Apr 20','Jan 21','Oct 21','Jul 22','Apr 23','Jan 24','Oct 24','Jul 25','Feb 26'];

// Organic traffic data matching the growth curve
const values = [
  200, 300, 400, 500, 600, 700, 800, 1200,    // Jan 12 - Apr 17: flat/very low
  2000, 4500, 8000, 12000,                      // Jan 18 - Apr 20: gradual climb
  18000, 28000, 38000, 55000,                    // Jan 21 - Apr 23: steeper
  58000, 62000, 64000, 66800                     // Jan 24 - Feb 26: near peak
];

const maxVal = 66800;
const yTicks = [0, 10000, 20000, 30000, 40000, 50000, 60000, 66800];
const yLabels = ['0', '10K', '20K', '30K', '40K', '50K', '60K', '66.8K'];

const padding = { left: 10, right: 50, top: 8, bottom: 40 };

function easeInOutCubic(t) { return t < 0.5 ? 4*t*t*t : 1 - Math.pow(-2*t+2, 3)/2; }

let dims = resize();
const duration = 2500;
let startTime = null;

function draw(timestamp) {
  if (!startTime) startTime = timestamp;
  const elapsed = timestamp - startTime;
  const progress = Math.min(elapsed / duration, 1);
  const easedProgress = easeInOutCubic(progress);

  dims = resize();
  const { w, h } = dims;
  const chartW = w - padding.left - padding.right;
  const chartH = h - padding.top - padding.bottom;

  ctx.clearRect(0, 0, w, h);

  // Grid lines (dashed)
  ctx.setLineDash([4, 4]);
  ctx.strokeStyle = '#2a2a44';
  ctx.lineWidth = 0.5;
  yTicks.forEach((val, i) => {
    const y = padding.top + chartH - (val / maxVal) * chartH;
    ctx.beginPath();
    ctx.moveTo(padding.left, y);
    ctx.lineTo(w - padding.right, y);
    ctx.stroke();
    // Y labels on right
    ctx.fillStyle = i === yTicks.length - 1 ? '#2ECC71' : '#555';
    ctx.font = i === yTicks.length - 1 ? 'bold 11px system-ui' : '11px system-ui';
    ctx.textAlign = 'left';
    ctx.fillText(yLabels[i], w - padding.right + 8, y + 4);
  });
  ctx.setLineDash([]);

  // Calculate points
  const points = values.map((val, i) => ({
    x: padding.left + (i / (values.length - 1)) * chartW,
    y: padding.top + chartH - (val / maxVal) * chartH,
  }));

  // Draw line up to current progress
  const totalPoints = points.length;
  const revealIndex = easedProgress * (totalPoints - 1);
  const lastFullIndex = Math.floor(revealIndex);

  if (lastFullIndex >= 0) {
    // Line
    ctx.beginPath();
    ctx.strokeStyle = '#BB8FCE';
    ctx.lineWidth = 2.5;
    ctx.lineJoin = 'round';
    ctx.lineCap = 'round';
    ctx.moveTo(points[0].x, points[0].y);

    for (let i = 1; i <= lastFullIndex && i < totalPoints; i++) {
      ctx.lineTo(points[i].x, points[i].y);
    }

    // Interpolate to partial next point
    if (lastFullIndex < totalPoints - 1) {
      const frac = revealIndex - lastFullIndex;
      const px = points[lastFullIndex].x + (points[lastFullIndex + 1].x - points[lastFullIndex].x) * frac;
      const py = points[lastFullIndex].y + (points[lastFullIndex + 1].y - points[lastFullIndex].y) * frac;
      ctx.lineTo(px, py);
    }
    ctx.stroke();

    // Glow dot at the tip
    const tipIdx = Math.min(lastFullIndex + 1, totalPoints - 1);
    const frac = revealIndex - lastFullIndex;
    const tipX = lastFullIndex < totalPoints - 1
      ? points[lastFullIndex].x + (points[tipIdx].x - points[lastFullIndex].x) * frac
      : points[totalPoints - 1].x;
    const tipY = lastFullIndex < totalPoints - 1
      ? points[lastFullIndex].y + (points[tipIdx].y - points[lastFullIndex].y) * frac
      : points[totalPoints - 1].y;

    ctx.beginPath();
    ctx.arc(tipX, tipY, 4, 0, Math.PI * 2);
    ctx.fillStyle = '#BB8FCE';
    ctx.fill();
    ctx.beginPath();
    ctx.arc(tipX, tipY, 8, 0, Math.PI * 2);
    ctx.fillStyle = 'rgba(187,143,206,0.2)';
    ctx.fill();
  }

  // X-axis labels (show every 2nd)
  ctx.fillStyle = '#555';
  ctx.font = '10px system-ui';
  ctx.textAlign = 'center';
  for (let i = 0; i < labels.length; i += 2) {
    const x = padding.left + (i / (labels.length - 1)) * chartW;
    ctx.fillText(labels[i], x, h - 8);
  }

  if (progress < 1) requestAnimationFrame(draw);
}

requestAnimationFrame(draw);
window.addEventListener('resize', () => { startTime = null; requestAnimationFrame(draw); });
</script>
</body>
</html>
